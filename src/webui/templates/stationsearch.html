{% extends "layout.html" %}
{% set active_page = 2 %}

{% block title %}
  Station Search
{% endblock %}
{% block content %}
  <h1>Station Search</h1>
  <hr/>
  <form action="{{ url_for('stationsearch') }}" method="GET">
    <div class="row mb-2">
      <div class="col-xxl-6" style="width: 660px;">
        <div class="row">
          <div class="col-md-6">
            <div class="row">
              <div class="col-sm-6">
                <label for="txname" class="form-label"><small>order by</small></label>
                <input type="text" id="txname" name="name" class="form-control" placeholder="Station Name" value="{{ args and args["name"]|default("") }}">
              </div>
              <div class="col-sm-6">
                <label for="slorderby" class="form-label"><small>order by</small></label>
                <select name="orderby" id="slorderby" class="form-control">
                    <option {% if args and args["orderby"] and args["orderby"]=="NAME" %}selected{% endif %}>NAME</option>
                    <option {% if args and args["orderby"] and args["orderby"]=="VOTES" %}selected{% endif %}>VOTES</option>
                    <option {% if args and args["orderby"] and args["orderby"]=="CLICKTREND" %}selected{% endif %}>CLICKTREND</option>
                    <option {% if args and args["orderby"] and args["orderby"]=="CLICKCOUNT" %}selected{% endif %}>CLICKCOUNT</option>
                </select>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="row">
              <div class="col-sm-3">
                <label for="slcountry" class="form-label"><small></small>country</small></label>
                <select name="country" id="slcountry" class="form-control">
                  {% for country in countries.countrylist %}
                    {% if args and args["country"] %}
                      <option {% if args and args["country"] and args["country"]==country %}selected{% endif %}>{{country}}</option>
                    {% else %}
                      <option {% if "DE"==country %}selected{% endif %}>{{country}}</option>
                    {% endif %}
                  {% endfor %}
                </select>
              </div>
              <div class="col-sm-3">
                <label for="slorder" class="form-label"><small>order</small></label>
                <select name="order" id="slorder" class="form-control">
                  <option {% if args and args["order"] and args["order"]=="ASC" %}selected{% endif %}>ASC</option>
                  <option {% if args and args["order"] and args["order"]=="DSC" %}selected{% endif %}>DSC</option>
                </select>
              </div>
              <div class="col d-flex align-items-end">
                <button type="submit" class="btn btn-secondary  align-bottom">SEARCH</button>
              </div>

            </div>
          </div>
          <div class="col">

          </div>
        </div>
      </div>
      <div class="col-xxl-6" style="width: 660px;min-height: 10px;">
      </div>
    </div>

  </form>
  {% if stations %}
  <nav aria-label="Stations table navigation">
    <ul class="pagination">
      <li class="page-item">
        <a class="page-link" href="{{ url_for('stationsearch') }}" aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
      <li class="page-item">
        <a class="page-link" href="{{ url_for('stationsearch') }}" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
    </ul>
  </nav>
    <div class="table-responsive">
      <table id="stationstable" class="table table-striped table-hover">
        <thead class="table-primary">
          <tr>
            <th scope="col" style="width:10%;">uuid</th>
            <th scope="col" style="width:10%;">name</th>
            <th scope="col" style="width:30%;">url</th>
            <th scope="col" style="width:20%;;">homepage</th>
            <th scope="col" style="width:10%;">language-codes</th>
            <th scope="col" style="width:10%;">tags | countrycode | votes | codec | bitrate | clickcount | clicktrend</th>
          </tr>
        </thead>
        <tbody class="text-break table-group-divider">
        {% for station in stations %}
          <tr>
            <td>{{station.stationuuid}}</td>
            <td>{{station.name}}</td>
            <td>{{station.url}}</td>
            <td>{{station.homepage}}</td>
            <td>{{station.languagecodes}}</td>
            <td>{{station.tags}} | {{station.countrycode}} | {{station.votes}} | {{station.codec}} | {{station.bitrate}} | {{station.clickcount}} | {{station.clicktrend}}</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  {% endif %}
{% endblock %}
